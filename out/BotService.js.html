<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: BotService.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: BotService.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * This module is responsible for storing and retrieving
 * persistent bots and interacting with them.
 *
 * @module services/BotService
 */

const cache = require('../cache');

// TODO: move this to its own class
/**
 * @typedef {Object} Bot
 * @property {number} id - The id of the bot
 * @property {string} name - The name of the bot
 * @property {string} template - The template of the bot
 * @property {string} status - The status of the bot
 */

/**
 * Returns the bot with the given id.
 *
 * @param {number} id - The id of the target bot
 */
exports.findById = function (id) {
  return cache.bots.find(item => item.id === id);
};

/**
 * Returns all bots.
 *
 * @returns {Bot[]} All bots
 */
exports.findAll = function () {
  return cache.bots;
};

/**
 * Creates and saves a new bot.
 *
 * @param {string} name - The name for the bot
 * @param {string} template - The template that is to be used for the bot
 * @returns {number} The id of the saved bot
 */
exports.save = function (name, template) {
  const bot = {
    id: ++cache.currentId,
    name,
    template,
    status: 'NOT_RUNNING',
  };

  cache.bots.push(bot);

  return bot.id;
};

/**
 * Deletes the given bot.
 *
 * @param {Bot} bot - The bot that is to be deleted
 */
exports.delete = function (bot) {
  const index = cache.bots.findIndex(item => item.id === bot.id);

  // TODO: stop the bot, if it is running

  cache.bots.splice(index, 1);
};

/**
 * Updates the given bot.
 *
 * @param {Bot} bot - The bot that is being updated
 * @param {Object} props - The properties that are being updated
 * @param {string} props.name - The name of the bot
 */
exports.update = function (bot, { name }) {
  // TODO: update all other properties as well
  bot.name = name;
};

/**
 * Starts the given bot.
 *
 * @param {Bot} bot - The bot that is to be started
 */
exports.start = function (bot) {
  // TODO: actually start the bot
  // TODO: should probably be separate from DB logic
  bot.status = 'RUNNING';
};

/**
 * Stops the given bot.
 *
 * @param {Bot} bot - The bot that is to be stopped
 */
exports.stop = function (bot) {
  // TODO: actually stop the bot
  // TODO: should probably be separate from DB logic
  bot.status = 'NOT_RUNNING';
};

/**
 * Restarts the given bot.
 *
 * @param {Bot} bot - The bot that is to be restarted
 */
exports.restart = function (bot) {
  // TODO: actually restart the bot
  bot.status = 'RUNNING';
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-services_BotService.html">services/BotService</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Nov 14 2017 13:13:54 GMT+0100 (CET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
